{{!-- views/pages/flashcardDeck.hbs --}}
{{#extends 'layouts/main'}}

{{#block 'body'}}
  <div class="flashcards-container">
    <h1>{{deckName}}</h1>

    <div id="flashcards-carousel">
      {{#each flashcards}}
        <div class="flashcard{{#if @first}} active{{/if}}">
          <div class="card">
            <div class="card-face card-front">{{this.front}}</div>
            <div class="card-face card-back">{{this.back}}</div>
          </div>
        </div>
      {{/each}}
    </div>

    <div class="controls">
      <button id="prevCard">Previous</button>
      <button id="flipCard">Flip</button>
      <button id="nextCard">Next</button>
    </div>
  </div>

  <link rel="stylesheet" href="../../resources/css/flashcards.css">

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const cards = Array.from(document.querySelectorAll('.flashcard'));
      let current = 0;

      function show(i) {
        cards.forEach((c, idx) => {
          c.classList.toggle('active', idx === i);
          // reset any flipped state
          c.querySelector('.card').classList.remove('flipped');
        });
      }

      document.getElementById('prevCard').addEventListener('click', () => {
        if (!cards.length) return;
        current = (current - 1 + cards.length) % cards.length;
        show(current);
      });

      document.getElementById('nextCard').addEventListener('click', () => {
        if (!cards.length) return;
        current = (current + 1) % cards.length;
        show(current);
      });

      document.getElementById('flipCard').addEventListener('click', () => {
        if (!cards.length) return;
        const cardEl = cards[current].querySelector('.card');
        cardEl.classList.toggle('flipped');
      });
    });
  </script>
{{/block}}